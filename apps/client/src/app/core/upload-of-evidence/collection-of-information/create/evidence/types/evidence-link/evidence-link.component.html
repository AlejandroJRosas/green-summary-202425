<section class="mt-3 mb-5">
  <p-panel
    expandIcon="pi pi-minus"
    collapseIcon="pi pi-plus"
    [toggleable]="true"
    iconPos="start"
    styleClass="pb-3"
  >
    <ng-template pTemplate="header" class="p-0">
      <div
        class="flex flex-row justify-content-start align-items-center gap-4 w-full"
      >
        <h3 class="text-lg">Evidencia {{ index + 1 }}</h3>
        <div class="flex flex-row gap-1">
          <button
            class="p-panel-header-icon p-link mr-2"
            [disabled]="!createdEvidence"
          >
            <span
              class="pi pi-pencil"
              (click)="!createdEvidence ? '' : enableForm()"
              (click)="enableEditButton()"
              [style.color]="createdEvidence ? '#22c55e' : 'darkgrey'"
              [style.border]="
                createdEvidence ? 'solid 1.5px #22c55e' : 'solid 1.5px darkgrey'
              "
              style="border-radius: 100%; padding: 7px"
            ></span>
          </button>
          <button
            class="p-panel-header-icon p-link mr-2"
            [disabled]="!createdEvidence"
          >
            <span
              class="pi pi-trash"
              (click)="!createdEvidence ? '' : onDelete()"
              [style.color]="createdEvidence ? '#ef4444' : 'darkgrey'"
              [style.border]="
                createdEvidence ? 'solid 1.5px #ef4444' : 'solid 1.5px darkgrey'
              "
              style="border-radius: 100%; padding: 6px"
            ></span>
          </button>
        </div>
      </div>
    </ng-template>
    <form [formGroup]="formGroup">
      <div class="flex flex-column gap-2 w-full">
        <label class="flex flex-column gap-2 w-full">
          Descripci√≥n
          <textarea
            pInputTextarea
            rows="5"
            cols="40"
            [autoResize]="true"
            formControlName="description"
            (input)="errorsUpdate('description')"
            (blur)="errorsUpdate('description')"
          ></textarea>
        </label>
        <small class="p-error">{{ errors.description }}</small>
      </div>
      <div class="flex flex-column gap-2 pt-4 w-full">
        <label class="flex flex-column gap-2 w-full">
          Link externo
          <input
            pInputText
            name="externalLink"
            class="w-full"
            type="text"
            formControlName="externalLink"
            (input)="errorsUpdate('externalLink')"
            (blur)="errorsUpdate('externalLink')"
          />
        </label>
        <small class="p-error">{{ errors.externalLink }}</small>
      </div>
    </form>
    <footer class="pt-3">
      @if (enableEdit) {
        <p-button
          label="Guardar"
          (click)="onEdit()"
          size="small"
          icon="pi pi-check"
          [outlined]="true"
          severity="success"
          [disabled]="formGroup.invalid || editedEvience"
        />
      } @else {
        <p-button
          label="Guardar"
          (click)="onCreate()"
          size="small"
          icon="pi pi-check"
          [outlined]="true"
          severity="success"
          [disabled]="formGroup.invalid || createdEvidence"
        />
      }
    </footer>
  </p-panel>
</section>
