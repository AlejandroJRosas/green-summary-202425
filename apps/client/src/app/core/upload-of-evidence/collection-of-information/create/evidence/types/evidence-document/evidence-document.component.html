<section class="mt-3 mb-5">
  <form [formGroup]="formGroup" enctype="multipart/form-data">
    <div class="flex flex-column gap-2 w-full">
      <label class="flex flex-column gap-2 w-full">
        Descripci칩n
        <textarea
          name="description"
          pInputTextarea
          rows="5"
          cols="40"
          formControlName="description"
          [autoResize]="true"
          (input)="errorsUpdate('description')"
          (blur)="errorsUpdate('description')"
        ></textarea>
      </label>
      <small class="p-error">{{ errors.description }}</small>
    </div>
    <h1 class="text-color-secondary text-xl">
      Selecciona el documento a subir
    </h1>
    <p-fileUpload
      (onRemove)="onRemove()"
      (onSelect)="onSelect($event)"
      [multiple]="false"
      accept=".pdf,.doc,.docx,.xls,.xlsx"
      maxFileSize="2097152"
      chooseLabel="Seleccionar"
      showCancelButton="false"
      showUploadButton="false"
      formControlName="fileLink"
      auto="true"
      [disabled]="createdEvidence"
      invalidFileSizeMessageSummary="Tama침o de archivo inv치lido"
      invalidFileSizeMessageDetail="El tama침o del documento es superior a 2Mb"
      ngDefaultControl
    >
      <ng-template pTemplate="uploader">
        @if (createdEvidence) {
          <div
            class="flex flex-row justify-content-between align-content-center w-9"
          >
            <p style="word-break: break-word">
              {{ this.formGroup.controls.fileLink.value?.name }}
            </p>
            <p>{{ this.formGroup.controls.fileLink.value?.size }}KB</p>
          </div>
        } @else if (removeFile === false) {
          <div
            class="flex flex-row justify-content-between align-content-center p-4"
          >
            <p style="word-break: break-word">
              {{ this.formGroup.controls.fileLink.value?.name }}
            </p>
            <p>{{ this.formGroup.controls.fileLink.value?.size }}KB</p>
            <p-button icon="pi pi-times" (click)="onRemove()" />
          </div>
        } @else {
          <ng-template pTemplate="content" />
        }
      </ng-template>
    </p-fileUpload>
    <small class="p-error">{{ errors.fileLink }}</small>
  </form>
  <footer class="pt-3">
    <p-button
      label="Guardar"
      (click)="onCreate()"
      size="small"
      icon="pi pi-check"
      [outlined]="true"
      severity="success"
      [disabled]="formGroup.invalid || createdEvidence"
    />
  </footer>
</section>
